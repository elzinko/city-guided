# ═══════════════════════════════════════════════════════════════════════════════
# City-Guided Environment Configuration Template
# ═══════════════════════════════════════════════════════════════════════════════
#
# Copy this file to create environment-specific configurations:
#   cp .env.template .env.local      # Local development
#   cp .env.template .env.staging    # Staging (AWS)
#   cp .env.template .env.prod       # Production
#
# ⚠️  .env.template is versioned, .env.* files are NOT (contain secrets)
#
# ═══════════════════════════════════════════════════════════════════════════════

# ───────────────────────────────────────────────────────────────────────────────
# ENVIRONMENT
# ───────────────────────────────────────────────────────────────────────────────
ENVIRONMENT=local
NODE_ENV=development

# ───────────────────────────────────────────────────────────────────────────────
# PROJECT
# ───────────────────────────────────────────────────────────────────────────────
# PROJECT_NAME: Used by docker-compose for container/network names
# Format: city-guided-${ENVIRONMENT}
PROJECT_NAME=city-guided

# ───────────────────────────────────────────────────────────────────────────────
# SITE CONFIGURATION
# ───────────────────────────────────────────────────────────────────────────────
SITE_DOMAIN=localhost
SERVER_NAME=localhost

# ───────────────────────────────────────────────────────────────────────────────
# PORTS (internal services)
# ───────────────────────────────────────────────────────────────────────────────
API_PORT=4000
WEB_PORT=3080
OSRM_PORT=5001

# ───────────────────────────────────────────────────────────────────────────────
# CADDY (reverse proxy - main entry point)
# ───────────────────────────────────────────────────────────────────────────────
CADDY_HTTP_PORT=80
CADDY_HTTPS_PORT=443

# ───────────────────────────────────────────────────────────────────────────────
# OSRM CONFIGURATION
# ───────────────────────────────────────────────────────────────────────────────
OSRM_REGION=europe/france/ile-de-france
OSRM_REGION_BASE=europe-france-ile-de-france
OSRM_URL=http://osrm:5000
OSRM_NETWORK_EXTERNAL=true

# ───────────────────────────────────────────────────────────────────────────────
# URLS (Next.js public variables - exposed to browser)
# ───────────────────────────────────────────────────────────────────────────────
# For local: http://localhost (via Caddy on port 80)
# For staging/prod: https://SITE_DOMAIN
NEXT_PUBLIC_API_URL=http://localhost/api
NEXT_PUBLIC_OSRM_URL=http://localhost/osrm

# ───────────────────────────────────────────────────────────────────────────────
# DOCKER IMAGES (from GHCR)
# ───────────────────────────────────────────────────────────────────────────────
API_IMAGE=ghcr.io/elzinko/city-guided-api:latest
WEB_IMAGE=ghcr.io/elzinko/city-guided-web:latest

# ───────────────────────────────────────────────────────────────────────────────
# DOCKER SETTINGS
# ───────────────────────────────────────────────────────────────────────────────
RESTART_POLICY=no
API_DOCKERFILE=infra/docker/Dockerfile.api
WEB_DOCKERFILE=infra/docker/Dockerfile.frontend

# ───────────────────────────────────────────────────────────────────────────────
# APPLICATION CONFIGURATION
# ───────────────────────────────────────────────────────────────────────────────
LOG_LEVEL=info
CORS_ORIGIN=http://localhost

# ───────────────────────────────────────────────────────────────────────────────
# BUILD METADATA
# ───────────────────────────────────────────────────────────────────────────────
APP_VERSION=dev
APP_REPO_URL=https://github.com/elzinko/city-guided

# ───────────────────────────────────────────────────────────────────────────────
# DEVELOPER OPTIONS (runtime variable - read server-side)
# ───────────────────────────────────────────────────────────────────────────────
# Show developer control panel (GPS simulator, route management, etc.)
# Set to "true" for local/staging, "false" for production
SHOW_DEV_OPTIONS=true

# ───────────────────────────────────────────────────────────────────────────────
# INFRASTRUCTURE VARIABLES (Auto-generated by pnpm provision)
# ───────────────────────────────────────────────────────────────────────────────
# These variables are automatically added to SSM by provision.ts:
#   - SECRET_AWS_ACCESS_KEY_ID (AWS credentials for CI/CD)
#   - SECRET_AWS_SECRET_ACCESS_KEY (AWS credentials for CI/CD)
#   - SECRET_AWS_REGION (AWS region)
#   - SECRET_EC2_INSTANCE_ID (EC2 instance ID, only for EC2 mode - deprecated)
#   - SECRET_EC2_PUBLIC_IP (EC2 public IP, only for EC2 mode - deprecated)
#
# ⚠️  Do NOT add these manually to .env files - they are managed by infrastructure
# ⚠️  For ECS mode, EC2_* variables are not used

# ───────────────────────────────────────────────────────────────────────────────
# SECRETS (⚠️ Never commit real values!)
# ───────────────────────────────────────────────────────────────────────────────
# All secrets must use SECRET_ prefix for proper handling in SSM
SECRET_DUCKDNS_TOKEN=

# Future secrets (uncomment when needed)
# SECRET_DATABASE_URL=
# SECRET_API_KEY=
